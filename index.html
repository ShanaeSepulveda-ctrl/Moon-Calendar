<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>13 Moon Calendar</title>
    
<script src="https://unpkg.com/suncalc@1.9.0/suncalc.js"></script>
    
  <style>
    body {
      font-family: system-ui, sans-serif;
      background: #0b0d17;
      color: #eee;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    #calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }

    .day {
      background: #15192d;
      border-radius: 10px;
      padding: 10px;
      cursor: pointer;
      min-height: 90px;
      transition: background 0.2s;
    }

    .day:hover {
      background: #1f2550;
    }

    .gregorian {
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .moon-day {
      font-size: 1.2rem;
      font-weight: bold;
      margin-top: 5px;
    }

    .moon-name {
      font-size: 0.75rem;
      opacity: 0.8;
      margin-top: 4px;
    }

    #dayInfo {
      margin-top: 30px;
      padding: 20px;
      border-radius: 12px;
      background: #15192d;
    }
    
 .day.today {
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 0 12px rgba(180, 200, 255, 0.6);
  background: radial-gradient(
    circle at top,
    rgba(255, 255, 255, 0.08),
    #15192d
  );
}

/* Optional gentle pulse */
@keyframes softGlow {
  0% { box-shadow: 0 0 8px rgba(180, 200, 255, 0.4); }
  50% { box-shadow: 0 0 16px rgba(180, 200, 255, 0.8); }
  100% { box-shadow: 0 0 8px rgba(180, 200, 255, 0.4); }
}

.day.today {
  animation: softGlow 4s ease-in-out infinite;
}
  </style>
    
    <link rel="manifest" href="manifest.json">

</head>

<body>
  <h1>13 Moon Calendar</h1>

  <div id="calendar"></div>

  <div id="dayInfo">
    <h2>Selected Day</h2>
    <p id="dayText">Click a day to see its energy.</p>
  </div>

<script>
  const calendar = document.getElementById("calendar");
  const dayText = document.getElementById("dayText");

  // --- TODAY (safe version) ---
  const Date = new Date();
  const Today =
  date.getDate() === todayDate.getDate() &&
  date.getMonth() === todayDate.getMonth() &&
  date.getFullYear() === todayDate.getFullYear();

  // --- Moon phase helper ---
  function getMoonPhase(date) {
    if (typeof SunCalc === "undefined") return "ðŸŒ™ Moon";

    const phase = SunCalc.getMoonIllumination(date).phase;

    if (phase < 0.03 || phase > 0.97) return "ðŸŒ‘ New Moon";
    if (phase < 0.22) return "ðŸŒ’ Waxing Crescent";
    if (phase < 0.28) return "ðŸŒ“ First Quarter";
    if (phase < 0.47) return "ðŸŒ” Waxing Gibbous";
    if (phase < 0.53) return "ðŸŒ• Full Moon";
    if (phase < 0.72) return "ðŸŒ– Waning Gibbous";
    if (phase < 0.78) return "ðŸŒ— Last Quarter";
    return "ðŸŒ˜ Waning Crescent";
  }

  // --- Render calendar ---
  function renderMonth(year, month) {
    calendar.innerHTML = "";

    const firstDay = new Date(year, month, 1);
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    // Pad start of week
    for (let i = 0; i < firstDay.getDay(); i++) {
      calendar.appendChild(document.createElement("div"));
    }

    for (let day = 1; day <= daysInMonth; day++) {
      const date = new Date(year, month, day);

      const moonDay = ((day - 1) % 28) + 1;
      const moonPhase = getMoonPhase(date);

      const cell = document.createElement("div");
      cell.className = "day";
      if (isToday) cell.classList.add("today");
  // --- Run it ---
  const now = new Date();
  renderMonth(now.getFullYear(), now.getMonth(),now.getToday());
      
      cell.innerHTML = `
        <div class="gregorian">${date.toDateString()}</div>
        <div class="moon-day">Moon Day ${moonDay}</div>
        <div class="moon-name">${moonPhase}</div>
      `;

      cell.onclick = () => {
        dayText.innerText = `
${date.toDateString()}
Moon Day ${moonDay}
${moonPhase}

A day for presence, reflection, and gentle alignment.
        `;
      };

      calendar.appendChild(cell);
    }
  }

  // --- Service worker ---
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("service-worker.js");
  }
</script>
  
</body>
</html>
